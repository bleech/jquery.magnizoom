/*! jQuery Magnizoom - v0.2.0 - 2012-08-05
* https://github.com/bleech/jquery.magnizoom
* Copyright (c) 2012 bleech; Licensed MIT, GPL */
(function(a,b,c,d){a.fn.magnizoom=function(b){return b=a.extend({},a.fn.magnizoom.options,b),this.each(function(){var c=a(this);c.data("magnizoom",new e(c,b))})},a.fn.magnizoom.options={diameter:150};var e=function(c,d){this.elem=c,this.options=d,this.radius=this.options.diameter/2,this.container=a(".magnizoom").length>0?a(".magnizoom"):a('<div class="magnizoom" />').appendTo("body").hide(),this.elem.on("load",a.proxy(this.setup,this)),a(b).on("resize",a.proxy(this.setup,this)),(this.elem.get(0).complete||this.elem.get(0).readyState===4)&&this.setup.apply(this),this.elem.on("mousemove touchmove",a.proxy(this.load,this))};e.prototype.setup=function(){var b=this;this.src={height:this.elem.height(),width:this.elem.width(),left:b.elem.offset().left,top:b.elem.offset().top},a("<img />").attr("src",this.elem.attr("rel")).on("load",function(){b.is_ready=!0,b.rel={height:this.height,width:this.width}})},e.prototype.load=function(){if(this.is_ready!==!0)return;var b=this;this.unload(),this.container.css({background:"url("+this.elem.attr("rel")+") 0 0 no-repeat",border:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:this.radius,boxShadow:"0 0 5px rgba(0, 0, 0, 0.5)",cursor:"url(data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D), default",display:"block",height:this.options.diameter,left:-99999,position:"fixed",top:-99999,width:this.options.diameter}),a("body").on("mousemove touchmove",function(a){b.is_mobile=a.originalEvent&&a.originalEvent.targetTouches?!0:!1;if(b.is_mobile&&a.originalEvent.targetTouches[1])return;return a=b.is_mobile?a.originalEvent.targetTouches[0]:a,b.refreshPosition.apply(b,[a]),(a.pageX>=b.src.left+b.src.width||a.pageY>=b.src.top+b.src.height||a.pageX<=b.src.left||a.pageY<=b.src.top)&&b.unload.apply(b),!1}).on("touchend",a.proxy(b.unload,b))},e.prototype.unload=function(){this.container.hide(),a("body").off("mousemove touchmove")},e.prototype.refreshPosition=function(a){var b=this.is_mobile?this.options.diameter:this.radius,c=(a.pageX-this.src.left)/this.src.width*this.rel.width*-1+b+(this.is_mobile?30:0),d=(a.pageY-this.src.top)/this.src.height*this.rel.height*-1+b+(this.is_mobile?30:0);this.container.css({left:a.clientX-b,top:a.clientY-b,backgroundPosition:c+"px "+d+"px"})}})(jQuery,window,document);